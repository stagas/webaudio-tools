<h1>
webaudio-tools <a href="https://npmjs.org/package/webaudio-tools"><img src="https://img.shields.io/badge/npm-v2.0.0-F00.svg?colorA=000"/></a> <a href="src"><img src="https://img.shields.io/badge/loc-193-FFF.svg?colorA=000"/></a> <a href="https://cdn.jsdelivr.net/npm/webaudio-tools@2.0.0/dist/webaudio-tools.min.js"><img src="https://img.shields.io/badge/brotli-1K-333.svg?colorA=000"/></a> <a href="LICENSE"><img src="https://img.shields.io/badge/license-MIT-F0B.svg?colorA=000"/></a>
</h1>

<p></p>

Useful tools for WebAudio.

<h4>
<table><tr><td title="Triple click to select and copy paste">
<code>npm i webaudio-tools </code>
</td><td title="Triple click to select and copy paste">
<code>pnpm add webaudio-tools </code>
</td><td title="Triple click to select and copy paste">
<code>yarn add webaudio-tools</code>
</td></tr></table>
</h4>

## API

<p>  <details id="PeakingDetectorNode$34" title="Class" ><summary><span><a href="#PeakingDetectorNode$34">#</a></span>  <code><strong>PeakingDetectorNode</strong></code>     &ndash; PeakingDetectorNode.</summary>  <a href="src/peaking-detector.ts#L22">src/peaking-detector.ts#L22</a>  <ul>  <p>

Detects if signal is peaking above a threshold and emits `peaking` event.

```ts
const peakingDetectorNode = new PeakingDetectorNode(ctx)
peakingDetectorNode.decibelsThreshold = -1
peakingDetectorNode.onpeaking = () => console.log('peaking')

someAudioNode.connect(peakingDetectorNode)
// ... sometime later peaking is detected and fired once ...
// => console: "peaking"
//
// ... then when issue is resolved by user
// we make it possible to emit "peaking" event again
peakingDetectorNode.reset()
```

</p>
      <p>  <details id="constructor$35" title="Constructor" ><summary><span><a href="#constructor$35">#</a></span>  <code><strong>constructor</strong></code><em>(ctx)</em>    </summary>  <a href="src/peaking-detector.ts#L32">src/peaking-detector.ts#L32</a>  <ul>    <p>  <details id="new PeakingDetectorNode$36" title="ConstructorSignature" ><summary><span><a href="#new PeakingDetectorNode$36">#</a></span>  <code><strong>new PeakingDetectorNode</strong></code><em>()</em>    </summary>    <ul><p><a href="#PeakingDetectorNode$34">PeakingDetectorNode</a></p>      <p>  <details id="ctx$37" title="Parameter" ><summary><span><a href="#ctx$37">#</a></span>  <code><strong>ctx</strong></code>    </summary>    <ul><p><span>BaseAudioContext</span></p>        </ul></details></p>  </ul></details></p>    </ul></details><details id="decibelsThreshold$39" title="Property" ><summary><span><a href="#decibelsThreshold$39">#</a></span>  <code><strong>decibelsThreshold</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>-1</code></span>   &ndash; Decibels threshold in dBFS to emit peaking when above</summary>  <a href="src/peaking-detector.ts#L26">src/peaking-detector.ts#L26</a>  <ul><p>number</p>        </ul></details><details id="isPeaking$38" title="Property" ><summary><span><a href="#isPeaking$38">#</a></span>  <code><strong>isPeaking</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>false</code></span>   &ndash; Indicator whether node is peaking</summary>  <a href="src/peaking-detector.ts#L24">src/peaking-detector.ts#L24</a>  <ul><p>boolean</p>        </ul></details><details id="onpeaking$40" title="Method" ><summary><span><a href="#onpeaking$40">#</a></span>  <code><strong>onpeaking</strong></code><em>()</em>     &ndash; Event callback that fires when peaking is detected</summary>  <a href="src/peaking-detector.ts#L28">src/peaking-detector.ts#L28</a>  <ul>    <p>      <p><strong>onpeaking</strong><em>()</em>  &nbsp;=&gt;  <ul>void</ul></p></p>    </ul></details><details id="reset$43" title="Method" ><summary><span><a href="#reset$43">#</a></span>  <code><strong>reset</strong></code><em>()</em>    </summary>  <a href="src/peaking-detector.ts#L56">src/peaking-detector.ts#L56</a>  <ul>    <p>      <p><strong>reset</strong><em>()</em>  &nbsp;=&gt;  <ul>void</ul></p></p>    </ul></details></p></ul></details><details id="SilenceDetectorNode$45" title="Class" ><summary><span><a href="#SilenceDetectorNode$45">#</a></span>  <code><strong>SilenceDetectorNode</strong></code>     &ndash; SilenceDetectorNode.</summary>  <a href="src/silence-detector.ts#L23">src/silence-detector.ts#L23</a>  <ul>  <p>

Emits `silent` when signal is producing silence for a given amount of time
and emits `playing` when it starts playing.

```ts
const silenceDetectorNode = await SilenceDetectorNode.create(ctx)
silenceDetectorNode.silenceThresholdSeconds = 0.5
silenceDetectorNode.onplaying = () => console.log('playing')
silenceDetectorNode.onsilent = () => console.log('silent')

oscillatorNode.connect(silenceDetectorNode)
oscillatorNode.start() // => console: "playing"
...
oscillatorNode.stop()
// ... after 0.5 seconds ...
// => console: "silent"
```

</p>
      <p>  <details id="constructor$56" title="Constructor" ><summary><span><a href="#constructor$56">#</a></span>  <code><strong>constructor</strong></code><em>(context, options)</em>    </summary>  <a href="src/silence-detector.ts#L57">src/silence-detector.ts#L57</a>  <ul>    <p>  <details id="new SilenceDetectorNode$57" title="ConstructorSignature" ><summary><span><a href="#new SilenceDetectorNode$57">#</a></span>  <code><strong>new SilenceDetectorNode</strong></code><em>()</em>    </summary>    <ul><p><a href="#SilenceDetectorNode$45">SilenceDetectorNode</a></p>      <p>  <details id="context$58" title="Parameter" ><summary><span><a href="#context$58">#</a></span>  <code><strong>context</strong></code>    </summary>    <ul><p><span>BaseAudioContext</span></p>        </ul></details><details id="options$59" title="Parameter" ><summary><span><a href="#options$59">#</a></span>  <code><strong>options</strong></code>    </summary>    <ul><p><span>AudioWorkletNodeOptions</span> &amp; {<p>  <details id="processorOptions$61" title="Property" ><summary><span><a href="#processorOptions$61">#</a></span>  <code><strong>processorOptions</strong></code>    </summary>  <a href="src/silence-detector.ts#L60">src/silence-detector.ts#L60</a>  <ul><p><span>Partial</span>&lt;<span>SilenceDetectorOptions</span>&gt;</p>        </ul></details></p>}</p>        </ul></details></p>  </ul></details></p>    </ul></details><details id="isSilent$66" title="Property" ><summary><span><a href="#isSilent$66">#</a></span>  <code><strong>isSilent</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>true</code></span>  </summary>  <a href="src/silence-detector.ts#L55">src/silence-detector.ts#L55</a>  <ul><p>boolean</p>        </ul></details><details id="hasRegistered$46" title="Property" ><summary><span><a href="#hasRegistered$46">#</a></span>  <code><strong>hasRegistered</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>false</code></span>  </summary>  <a href="src/silence-detector.ts#L24">src/silence-detector.ts#L24</a>  <ul><p>boolean</p>        </ul></details><details id="onplaying$64" title="Method" ><summary><span><a href="#onplaying$64">#</a></span>  <code><strong>onplaying</strong></code><em>()</em>     &ndash; Event callback that fires when node detects audio</summary>  <a href="src/silence-detector.ts#L53">src/silence-detector.ts#L53</a>  <ul>    <p>      <p><strong>onplaying</strong><em>()</em>  &nbsp;=&gt;  <ul>void</ul></p></p>    </ul></details><details id="onsilence$62" title="Method" ><summary><span><a href="#onsilence$62">#</a></span>  <code><strong>onsilence</strong></code><em>()</em>     &ndash; Event callback that fires when node detects silence</summary>  <a href="src/silence-detector.ts#L51">src/silence-detector.ts#L51</a>  <ul>    <p>      <p><strong>onsilence</strong><em>()</em>  &nbsp;=&gt;  <ul>void</ul></p></p>    </ul></details><details id="create$50" title="Method" ><summary><span><a href="#create$50">#</a></span>  <code><strong>create</strong></code><em>(context, options)</em>    </summary>  <a href="src/silence-detector.ts#L38">src/silence-detector.ts#L38</a>  <ul>    <p>    <details id="context$52" title="Parameter" ><summary><span><a href="#context$52">#</a></span>  <code><strong>context</strong></code>    </summary>    <ul><p><span>BaseAudioContext</span></p>        </ul></details><details id="options$53" title="Parameter" ><summary><span><a href="#options$53">#</a></span>  <code><strong>options</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>{}</code></span>  </summary>    <ul><p><span>AudioWorkletNodeOptions</span> &amp; {<p>  <details id="processorOptions$55" title="Property" ><summary><span><a href="#processorOptions$55">#</a></span>  <code><strong>processorOptions</strong></code>    </summary>  <a href="src/silence-detector.ts#L41">src/silence-detector.ts#L41</a>  <ul><p><span>Partial</span>&lt;<span>SilenceDetectorOptions</span>&gt;</p>        </ul></details></p>}</p>        </ul></details>  <p><strong>create</strong><em>(context, options)</em>  &nbsp;=&gt;  <ul><span>Promise</span>&lt;<a href="#SilenceDetectorNode$45">SilenceDetectorNode</a>&gt;</ul></p></p>    </ul></details><details id="register$47" title="Method" ><summary><span><a href="#register$47">#</a></span>  <code><strong>register</strong></code><em>(context)</em>    </summary>  <a href="src/silence-detector.ts#L26">src/silence-detector.ts#L26</a>  <ul>    <p>    <details id="context$49" title="Parameter" ><summary><span><a href="#context$49">#</a></span>  <code><strong>context</strong></code>    </summary>    <ul><p><span>BaseAudioContext</span></p>        </ul></details>  <p><strong>register</strong><em>(context)</em>  &nbsp;=&gt;  <ul><span>Promise</span>&lt;void&gt;</ul></p></p>    </ul></details></p></ul></details><details id="MidiOp$20" title="Variable" ><summary><span><a href="#MidiOp$20">#</a></span>  <code><strong>MidiOp</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>...</code></span>  </summary>  <a href="src/midi-events.ts#L1">src/midi-events.ts#L1</a>  <ul><p>{<p>  <details id="NoteOff$22" title="Property" ><summary><span><a href="#NoteOff$22">#</a></span>  <code><strong>NoteOff</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>0x80</code></span>  </summary>    <ul><p>number</p>        </ul></details><details id="NoteOn$23" title="Property" ><summary><span><a href="#NoteOn$23">#</a></span>  <code><strong>NoteOn</strong></code>  <span><span>&nbsp;=&nbsp;</span>  <code>0x90</code></span>  </summary>    <ul><p>number</p>        </ul></details></p>}</p>        </ul></details><details id="createMidiEvent$24" title="Function" ><summary><span><a href="#createMidiEvent$24">#</a></span>  <code><strong>createMidiEvent</strong></code><em>(time, data)</em>    </summary>  <a href="src/midi-events.ts#L14">src/midi-events.ts#L14</a>  <ul>    <p>    <details id="time$26" title="Parameter" ><summary><span><a href="#time$26">#</a></span>  <code><strong>time</strong></code>    </summary>    <ul><p>number</p>        </ul></details><details id="data$27" title="Parameter" ><summary><span><a href="#data$27">#</a></span>  <code><strong>data</strong></code>    </summary>    <ul><p>number  []</p>        </ul></details>  <p><strong>createMidiEvent</strong><em>(time, data)</em>  &nbsp;=&gt;  <ul><span>MIDIMessageEvent</span></ul></p></p>    </ul></details><details id="createMidiNoteEvents$28" title="Function" ><summary><span><a href="#createMidiNoteEvents$28">#</a></span>  <code><strong>createMidiNoteEvents</strong></code><em>(time, note, velocity, length)</em>    </summary>  <a href="src/midi-events.ts#L20">src/midi-events.ts#L20</a>  <ul>    <p>    <details id="time$30" title="Parameter" ><summary><span><a href="#time$30">#</a></span>  <code><strong>time</strong></code>    </summary>    <ul><p>number</p>        </ul></details><details id="note$31" title="Parameter" ><summary><span><a href="#note$31">#</a></span>  <code><strong>note</strong></code>    </summary>    <ul><p>number</p>        </ul></details><details id="velocity$32" title="Parameter" ><summary><span><a href="#velocity$32">#</a></span>  <code><strong>velocity</strong></code>    </summary>    <ul><p>number</p>        </ul></details><details id="length$33" title="Parameter" ><summary><span><a href="#length$33">#</a></span>  <code><strong>length</strong></code>    </summary>    <ul><p>number</p>        </ul></details>  <p><strong>createMidiNoteEvents</strong><em>(time, note, velocity, length)</em>  &nbsp;=&gt;  <ul><span>MIDIMessageEvent</span>  []</ul></p></p>    </ul></details><details id="dbToFloat$1" title="Function" ><summary><span><a href="#dbToFloat$1">#</a></span>  <code><strong>dbToFloat</strong></code><em>(db)</em>     &ndash; Convert dBFS value <code>db</code> to float.</summary>  <a href="src/db.ts#L7">src/db.ts#L7</a>  <ul>    <p>    <details id="db$3" title="Parameter" ><summary><span><a href="#db$3">#</a></span>  <code><strong>db</strong></code>     &ndash; Value in dBFS</summary>    <ul><p>number</p>        </ul></details>  <p><strong>dbToFloat</strong><em>(db)</em>  &nbsp;=&gt;  <ul>number</ul></p></p>    </ul></details><details id="fetchAudioBuffer$7" title="Function" ><summary><span><a href="#fetchAudioBuffer$7">#</a></span>  <code><strong>fetchAudioBuffer</strong></code><em>(ctx, url)</em>     &ndash; Fetches and decodes an <code>AudioBuffer</code> from a <code>url</code>.</summary>  <a href="src/fetch-audio-buffer.ts#L8">src/fetch-audio-buffer.ts#L8</a>  <ul>    <p>    <details id="ctx$9" title="Parameter" ><summary><span><a href="#ctx$9">#</a></span>  <code><strong>ctx</strong></code>     &ndash; AudioContext to use.</summary>    <ul><p><span>AudioContext</span></p>        </ul></details><details id="url$10" title="Parameter" ><summary><span><a href="#url$10">#</a></span>  <code><strong>url</strong></code>     &ndash; URL to fetch audio file from.</summary>    <ul><p>string</p>        </ul></details>  <p><strong>fetchAudioBuffer</strong><em>(ctx, url)</em>  &nbsp;=&gt;  <ul><span>Promise</span>&lt;<span>AudioBuffer</span>&gt;</ul></p></p>    </ul></details><details id="fftLogIndexer$11" title="Function" ><summary><span><a href="#fftLogIndexer$11">#</a></span>  <code><strong>fftLogIndexer</strong></code><em>(minFreq, maxFreq, sampleRate, fftSize)</em>     &ndash; Returns a function that converts normalized FFT output for a given range
from linear to logarithmic scale, used for drawing spectrograms.</summary>  <a href="src/fft-log-indexer.ts#L11">src/fft-log-indexer.ts#L11</a>  <ul>    <p>    <details id="minFreq$13" title="Parameter" ><summary><span><a href="#minFreq$13">#</a></span>  <code><strong>minFreq</strong></code>     &ndash; Minimum frequency.</summary>    <ul><p>number</p>        </ul></details><details id="maxFreq$14" title="Parameter" ><summary><span><a href="#maxFreq$14">#</a></span>  <code><strong>maxFreq</strong></code>     &ndash; Maximum frequency.</summary>    <ul><p>number</p>        </ul></details><details id="sampleRate$15" title="Parameter" ><summary><span><a href="#sampleRate$15">#</a></span>  <code><strong>sampleRate</strong></code>     &ndash; Sample rate.</summary>    <ul><p>number</p>        </ul></details><details id="fftSize$16" title="Parameter" ><summary><span><a href="#fftSize$16">#</a></span>  <code><strong>fftSize</strong></code>    </summary>    <ul><p>number</p>        </ul></details>  <p><strong>fftLogIndexer</strong><em>(minFreq, maxFreq, sampleRate, fftSize)</em>  &nbsp;=&gt;  <ul><details id="__type$17" title="Function" ><summary><span><a href="#__type$17">#</a></span>  <em>(normal)</em>    </summary>    <ul>    <p>    <details id="normal$19" title="Parameter" ><summary><span><a href="#normal$19">#</a></span>  <code><strong>normal</strong></code>    </summary>    <ul><p>number</p>        </ul></details>  <p><strong></strong><em>(normal)</em>  &nbsp;=&gt;  <ul>number</ul></p></p>    </ul></details></ul></p></p>    </ul></details><details id="floatToDb$4" title="Function" ><summary><span><a href="#floatToDb$4">#</a></span>  <code><strong>floatToDb</strong></code><em>(float)</em>     &ndash; Convert float value <code>float</code> to dBFS.</summary>  <a href="src/db.ts#L15">src/db.ts#L15</a>  <ul>    <p>    <details id="float$6" title="Parameter" ><summary><span><a href="#float$6">#</a></span>  <code><strong>float</strong></code>     &ndash; Value in float</summary>    <ul><p>number</p>        </ul></details>  <p><strong>floatToDb</strong><em>(float)</em>  &nbsp;=&gt;  <ul>number</ul></p></p>    </ul></details></p>

## Contributing

[Fork](https://github.com/stagas/webaudio-tools/fork) or [edit](https://github.dev/stagas/webaudio-tools) and submit a PR.

All contributions are welcome!

## License

<a href="LICENSE">MIT</a> &copy; 2022 [stagas](https://github.com/stagas)
